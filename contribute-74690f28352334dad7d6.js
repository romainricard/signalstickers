(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{589:function(e,t,a){"use strict";a.r(t),function(e){var s,r=a(602),i=a(190),l=a(73),n=a(72),o=a(275),c=a(575),m=a(642),u=a(1),d=a.n(u),b=a(107),g=a(187),f=a(189);(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);var p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const h=Object(l.a)("div")({name:"Contribute",class:"c1b6b6t9"}),k=/^(?:([\w ]+))+(?:, ?([\w ]+))*$/g,E={signalArtUrl:"",source:"",tags:"",isNsfw:void 0,isOriginal:void 0,secAnswer:"",submitterComments:""},v={signalArtUrl:async e=>{if(!e)return"This field is required.";const t=new RegExp(b.h).exec(e);if(!t)return"Invalid signal.art URL.";const[,a,s]=t;if(o.a(c.a(["meta","id"],a),await Object(f.d)()))return"A sticker pack with that ID already exists in the directory.";try{await Object(f.c)(a,s)}catch{return"Invalid sticker pack. Please check the pack ID and key."}},source:e=>{if(e&&e.length>320)return"This field must be no longer than 320 characters."},tags:e=>{if(""!==e&&!new RegExp(k).test(e))return"Invalid value. Tags must be a list of comma-delimited strings."},isNsfw:e=>{if(void 0===e)return"This field is required."},isOriginal:e=>{if(void 0===e)return"This field is required."},secAnswer:e=>{if(""===e)return"This field is required."}},N=()=>{const[e,t]=d.a.useState(!1),[a,s]=d.a.useState(!1),[l,o]=d.a.useState(""),[c,u]=d.a.useState(""),f=()=>{fetch(b.b,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(async e=>e.json()).then(e=>{u(e.contribution_question),o(e.contribution_id)})};d.a.useEffect(()=>{setTimeout(()=>{f()},3e3)},[]);const p=d.a.useCallback(()=>{t(!0)},[t]),k=d.a.useCallback(({resetForm:e})=>{f(),e(),s(!1),window.scrollTo({top:0,behavior:"smooth"})},[a]),N=d.a.useCallback((e,{setErrors:t,setSubmitting:a})=>{const r=new RegExp(b.h).exec(e.signalArtUrl);if(!r)throw new Error("Unable to extract pack ID and pack key from signal.art URL.");const[,i,n]=r,o=m.a(e.tags.split(",").map(e=>e.trim()).filter(e=>e.length)),c={pack:{pack_id:i,pack_key:n,source:e.source,tags:o,nsfw:"true"===e.isNsfw,original:"true"===e.isOriginal},contribution_id:l,contribution_answer:e.secAnswer,submitter_comments:e.submitterComments};fetch(b.a,{method:"PUT",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(c)}).then(async e=>e.json().then(t=>({data:t,status:e.status})).then(e=>{if(400===e.status)return t({secAnswer:e.data.error}),s(!1),void a(!1);s(!0),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}))},[c,l]),w=d.a.useMemo(()=>d.a.createElement(g.a,{href:"https://support.signal.org/hc/articles/360031836512-Stickers#h_c2a0a45b-862f-4d12-9ab1-d9a6844062ca",title:"Sticker Creator Guidelines"},"Sticker Creator Guidelines"),[]),y=d.a.useMemo(()=>d.a.createElement(g.a,{href:"https://github.com/signalstickers/signalstickers#contribution-guidelines",title:"Signalstickers' Contribution Guidelines"},"Signalstickers' Contribution Guidelines"),[]);return d.a.createElement(h,{className:"my-4 p-lg-3 px-lg-4"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-12"},d.a.createElement("h1",{className:"mb-4"},"Contribute"),d.a.createElement("p",{className:"mt-lg-3 mb-4"},"To get your sticker pack listed in the Signal Stickers directory:"),d.a.createElement("ol",null,d.a.createElement("li",{className:"mb-2"},"Create a sticker pack using the Signal desktop app. For help, see Signal's ",w,". Be sure to save the ",d.a.createElement("code",null,"signal.art")," URL for your pack. If you are creating a sticker pack derived from an existing one on another platform or from someone else's artwork, please consider using the original author's name in the ",d.a.createElement("strong",null,"Author")," field when creating your pack in Signal, and consider adding their website, Twitter handle, or other online presence to the ",d.a.createElement("strong",null,"Source")," field below."),d.a.createElement("li",{className:"mb-2"},"Fill this form. Please check that your pack is not already listed on the website. Take the time to add tags, to help other users find your pack!"),d.a.createElement("li",{className:"mb-2"},"We will review the pack, and if it meets the ",y,", it will be publicly available on ",d.a.createElement("code",null,"signalstickers.com")," !")),d.a.createElement("p",null,"To check the status of your contribution, ",d.a.createElement(n.Link,{to:"/contribution-status"},"click here.")))),d.a.createElement("hr",{className:"pt-3 pb-2"}),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-12 col-md-10 offset-md-1"},d.a.createElement(r.d,{initialValues:E,onSubmit:(e,{setErrors:t,setSubmitting:a})=>N(e,{setErrors:t,setSubmitting:a}),validateOnChange:e,validateOnBlur:e},({values:e,errors:t,isValidating:s,isSubmitting:l,resetForm:n})=>d.a.createElement(r.c,{noValidate:!0},d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"form-row"},d.a.createElement("label",{className:Object(i.a)("col-12",t.signalArtUrl&&"text-danger"),htmlFor:"signal-art-url"},"Signal.art URL:",d.a.createElement(r.b,{type:"text",id:"signal-art-url",name:"signalArtUrl",validate:v.signalArtUrl,className:Object(i.a)("form-control","mt-2",t.signalArtUrl&&"is-invalid"),disabled:a,placeholder:"https://signal.art/addstickers/#pack_id=<your pack id>&pack_key=<your pack key>"}),d.a.createElement("div",{className:"invalid-feedback"},d.a.createElement(r.a,{name:"signalArtUrl"})," ")))),d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"form-row"},d.a.createElement("label",{className:Object(i.a)("col-12",t.source&&"text-danger"),htmlFor:"source"},"(Optional) Source:",d.a.createElement(r.b,{type:"text",id:"source",name:"source",validate:v.source,className:Object(i.a)("form-control","mt-2",t.source&&"is-invalid"),disabled:a}),d.a.createElement("small",{className:"form-text text-muted"},"Original author, website, company, etc."),d.a.createElement("div",{className:"invalid-feedback"},d.a.createElement(r.a,{name:"source"})," ")))),d.a.createElement("div",{className:"form-group mb-4"},d.a.createElement("div",{className:"form-row"},d.a.createElement("label",{className:Object(i.a)("col-12",t.tags&&"text-danger"),htmlFor:"tags"},"(Optional) Tags:",d.a.createElement(r.b,{type:"text",id:"tags",name:"tags",validate:v.tags,className:Object(i.a)("form-control","mt-2",t.tags&&"is-invalid"),disabled:a}),d.a.createElement("small",{className:"form-text text-muted"},"Comma-separated list of words."),d.a.createElement("div",{className:"invalid-feedback"},d.a.createElement(r.a,{name:"tags"})," ")))),d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"form-row"},d.a.createElement("legend",{className:Object(i.a)("col-12","mb-2",t.isNsfw&&"text-danger")},"Is your sticker pack ",d.a.createElement(g.a,{href:"https://www.urbandictionary.com/define.php?term=NSFW",title:"NSFW"},"NSFW"),"?")),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"col-12 mb-1"},d.a.createElement("div",{className:"custom-control custom-radio"},d.a.createElement(r.b,{type:"radio",id:"is-nsfw-true",name:"isNsfw",validate:v.isNsfw,className:Object(i.a)("custom-control-input",t.isNsfw&&"is-invalid"),value:"true",checked:"true"===e.isNsfw,disabled:a}),d.a.createElement("label",{className:"custom-control-label",htmlFor:"is-nsfw-true"},"Yes"))),d.a.createElement("div",{className:"col-12 mb-1"},d.a.createElement("div",{className:"custom-control custom-radio"},d.a.createElement(r.b,{type:"radio",id:"is-nsfw-false",name:"isNsfw",validate:v.isNsfw,className:Object(i.a)("custom-control-input",t.isNsfw&&"is-invalid"),value:"false",checked:"false"===e.isNsfw,disabled:a}),d.a.createElement("label",{className:"custom-control-label",htmlFor:"is-nsfw-false"},"No")),d.a.createElement("div",{className:"invalid-feedback"},d.a.createElement(r.a,{name:"isNsfw"})," ")))),d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"form-row"},d.a.createElement("legend",{className:Object(i.a)("col-12","mb-2",t.isOriginal&&"text-danger")},"Is your pack original? Did the author of the pack draw it exclusively for Signal, from original artworks?")),d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"col-12 mb-1"},d.a.createElement("div",{className:"custom-control custom-radio"},d.a.createElement(r.b,{type:"radio",id:"is-original-true",name:"isOriginal",validate:v.isOriginal,className:Object(i.a)("custom-control-input",t.isOriginal&&"is-invalid"),value:"true",checked:"true"===e.isOriginal,disabled:a}),d.a.createElement("label",{className:"custom-control-label",htmlFor:"is-original-true"},"Yes"))),d.a.createElement("div",{className:"col-12 mb-1"},d.a.createElement("div",{className:"custom-control custom-radio"},d.a.createElement(r.b,{type:"radio",id:"is-original-false",name:"isOriginal",validate:v.isOriginal,className:Object(i.a)("custom-control-input",t.isOriginal&&"is-invalid"),value:"false",checked:"false"===e.isOriginal,disabled:a}),d.a.createElement("label",{className:"custom-control-label",htmlFor:"is-original-false"},"No")),d.a.createElement("div",{className:"invalid-feedback"},d.a.createElement(r.a,{name:"isOriginal"})," ")))),d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"form-row"},d.a.createElement("label",{className:Object(i.a)("col-12",t.secAnswer&&"text-danger"),htmlFor:"secAnswer"},c,d.a.createElement(r.b,{type:"text",id:"secAnswer",name:"secAnswer",validate:v.secAnswer,className:Object(i.a)("form-control","mt-2",t.secAnswer&&"is-invalid"),disabled:a}),d.a.createElement("small",{className:"form-text text-muted"},"This question helps us to make sure that you are not a robot. The answer is a single word or number, without quotes."),d.a.createElement("div",{className:"invalid-feedback"},d.a.createElement(r.a,{name:"secAnswer"})," ")))),d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"form-row"},d.a.createElement("label",{className:"col-12",htmlFor:"submitterComments"},"(Optional) Any comments?",d.a.createElement(r.b,{as:"textarea",type:"textarea",id:"submitterComments",name:"submitterComments",className:"form-control mt-2",disabled:a,maxLength:"400"}),d.a.createElement("small",{className:"form-text text-muted"},"This will only be visible to moderators. Do not enter personnal information. Or just say hello, we love it :-)")))),d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"col-12"},d.a.createElement("button",{type:"submit",className:"btn btn-block btn-lg "+(a?"btn-success":"btn-primary "),disabled:l||s||a,onClick:p},a?d.a.createElement("span",null,"Request sent, thanks!"):d.a.createElement("span",null,"Propose to signalstickers.com"),l),a?d.a.createElement("button",{type:"reset",className:"btn btn-block btn-lg btn-primary",onClick:()=>k({resetForm:n})},"Propose another pack"):""))))))))};p(N,"useState{[hasBeenSubmitted, setHasBeenSubmitted](false)}\nuseState{[requestSent, setRequestSent](false)}\nuseState{[contributionRequestToken, setContributionRequestToken]('')}\nuseState{[contributionRequestQuestion, setContributionRequestQuestion]('')}\nuseEffect{}\nuseCallback{onSubmitClick}\nuseCallback{handleReset}\nuseCallback{onSubmit}\nuseMemo{stickerPackGuideLink}\nuseMemo{contributionGuidelines}");const w=N;var y,O;t.default=w,a(640),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(y.register(h,"Contribute","/home/runner/work/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),y.register(k,"TAGS_PATTERN","/home/runner/work/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),y.register(E,"initialValues","/home/runner/work/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),y.register(v,"validators","/home/runner/work/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),y.register(N,"ContributeComponent","/home/runner/work/signalstickers/signalstickers/src/components/contribute/Contribute.tsx"),y.register(w,"default","/home/runner/work/signalstickers/signalstickers/src/components/contribute/Contribute.tsx")),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&O(e)}.call(this,a(27)(e))},640:function(e,t,a){"use strict";a.r(t)},642:function(e,t,a){"use strict";var s=a(571),r=a(570),i=Object(r.a)(s.a);t.a=i}}]);
//# sourceMappingURL=contribute-74690f28352334dad7d6.js.map